<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 장 ETS 모형 | R로 알아가는 시계열분석</title>
  <meta name="description" content="3 장 ETS 모형 | R로 알아가는 시계열분석" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="3 장 ETS 모형 | R로 알아가는 시계열분석" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="yjyjpark/TS-with-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 장 ETS 모형 | R로 알아가는 시계열분석" />
  
  
  

<meta name="author" content="박동련" />


<meta name="date" content="2022-11-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-decomposition.html"/>
<link rel="next" href="chapter-arima.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>머리말</a></li>
<li class="chapter" data-level="1" data-path="chapter-ts-plot.html"><a href="chapter-ts-plot.html"><i class="fa fa-check"></i><b>1</b> 시계열 그래프</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-ts-plot.html"><a href="chapter-ts-plot.html#ts-객체-생성"><i class="fa fa-check"></i><code>ts</code> 객체 생성</a></li>
<li class="chapter" data-level="" data-path="chapter-ts-plot.html"><a href="chapter-ts-plot.html#시계열-그래프-작성"><i class="fa fa-check"></i>시계열 그래프 작성</a></li>
<li class="chapter" data-level="" data-path="chapter-ts-plot.html"><a href="chapter-ts-plot.html#seasonal-그래프-작성"><i class="fa fa-check"></i>Seasonal 그래프 작성</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter-decomposition.html"><a href="chapter-decomposition.html"><i class="fa fa-check"></i><b>2</b> 시계열 분해</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-decomposition.html"><a href="chapter-decomposition.html#전통적-시계열-분해-기법"><i class="fa fa-check"></i>전통적 시계열 분해 기법</a></li>
<li class="chapter" data-level="" data-path="chapter-decomposition.html"><a href="chapter-decomposition.html#stl-분해-기법"><i class="fa fa-check"></i>STL 분해 기법</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter-ets.html"><a href="chapter-ets.html"><i class="fa fa-check"></i><b>3</b> ETS 모형</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-ets.html"><a href="chapter-ets.html#전통적-지수평활법"><i class="fa fa-check"></i>전통적 지수평활법</a></li>
<li class="chapter" data-level="" data-path="chapter-ets.html"><a href="chapter-ets.html#ets-모형"><i class="fa fa-check"></i>ETS 모형</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter-arima.html"><a href="chapter-arima.html"><i class="fa fa-check"></i><b>4</b> ARIMA 모형</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-arima.html"><a href="chapter-arima.html#시계열자료의-정상성"><i class="fa fa-check"></i>시계열자료의 정상성</a></li>
<li class="chapter" data-level="" data-path="chapter-arima.html"><a href="chapter-arima.html#비계절형-arima-모형"><i class="fa fa-check"></i>비계절형 ARIMA 모형</a></li>
<li class="chapter" data-level="" data-path="chapter-arima.html"><a href="chapter-arima.html#계절형-arima-모형"><i class="fa fa-check"></i>계절형 ARIMA 모형</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter-regression.html"><a href="chapter-regression.html"><i class="fa fa-check"></i><b>5</b> 회귀모형</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-regression.html"><a href="chapter-regression.html#arma-오차-회귀모형"><i class="fa fa-check"></i>ARMA 오차 회귀모형</a></li>
<li class="chapter" data-level="" data-path="chapter-regression.html"><a href="chapter-regression.html#arma-오차-dynamic-회귀모형"><i class="fa fa-check"></i>ARMA 오차 Dynamic 회귀모형</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R로 알아가는 시계열분석</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-ets" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3 장</span> ETS 모형<a href="chapter-ets.html#chapter-ets" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="chapter-ets.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fpp2)</span>
<span id="cb32-2"><a href="chapter-ets.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div id="전통적-지수평활법" class="section level2 unnumbered hasAnchor">
<h2>전통적 지수평활법<a href="chapter-ets.html#전통적-지수평활법" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Simple exponential smoothing 예제: <code>fpp2::oil</code></li>
</ul>
<p><code>fpp2::oil</code>은 1965년부터 2013년까지 Saudi Arabia의 연간 원유 생산량 자료이다. 1996년 이후 자료에 대해 simple exponential smoothing을 적용해 보자.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="chapter-ets.html#cb33-1" aria-hidden="true" tabindex="-1"></a>oil_1996 <span class="ot">&lt;-</span> <span class="fu">window</span>(oil, <span class="at">start =</span> <span class="dv">1996</span>)</span></code></pre></div>
<p>1996년 이후 연간 원유 생산량 자료의 시계열 그래프를 그림 <a href="chapter-ets.html#fig:oil-1996">3.1</a>에 작성해 보자.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="chapter-ets.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(oil_1996) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="chapter-ets.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Annual oil production in Saudi Arabia&quot;</span>, </span>
<span id="cb34-3"><a href="chapter-ets.html#cb34-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:oil-1996"></span>
<img src="_main_files/figure-html/oil-1996-1.png" alt="1996년 이후 Saudi Arabia 연간 원유 생산량" width="576" />
<p class="caption">
그림 3.1: 1996년 이후 Saudi Arabia 연간 원유 생산량
</p>
</div>
<p>함수 <code>ses()</code>를 사용하여 2014년 ~ 2016년의 원유 생산량을 예측해 보자.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="chapter-ets.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ses</span>(oil_1996, <span class="at">h =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="chapter-ets.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>## 
## Forecast method: Simple exponential smoothing
## 
## Model Information:
## Simple exponential smoothing 
## 
## Call:
##  ses(y = oil_1996, h = 3) 
## 
##   Smoothing parameters:
##     alpha = 0.8339 
## 
##   Initial states:
##     l = 446.5868 
## 
##   sigma:  29.8282
## 
##      AIC     AICc      BIC 
## 178.1430 179.8573 180.8141 
## 
## Error measures:
##                    ME     RMSE     MAE      MPE     MAPE
## Training set 6.401975 28.12234 22.2587 1.097574 4.610635
##                   MASE        ACF1
## Training set 0.9256774 -0.03377748
## 
## Forecasts:
##      Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## 2014       542.6806 504.4541 580.9070 484.2183 601.1429
## 2015       542.6806 492.9073 592.4539 466.5589 618.8023
## 2016       542.6806 483.5747 601.7864 452.2860 633.0752</code></pre>
<p>Level에 대한 평활상수가 <span class="math inline">\(\alpha =\)</span> 0.8339으로 추정되었다는 것은 level에 큰 변화가 있는 자료를 의미한다. 이제 예측 결과를 그림 <a href="chapter-ets.html#fig:oil-1996-fore">3.2</a>의 그래프로 나타내 보자.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="chapter-ets.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ses</span>(oil_1996, <span class="at">h =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="chapter-ets.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span> </span>
<span id="cb37-3"><a href="chapter-ets.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:oil-1996-fore"></span>
<img src="_main_files/figure-html/oil-1996-fore-1.png" alt="1996년 이후 Saudi Arabia 연간 원유 생산량 및 2014년 이후 예측 결과" width="576" />
<p class="caption">
그림 3.2: 1996년 이후 Saudi Arabia 연간 원유 생산량 및 2014년 이후 예측 결과
</p>
</div>
<p>파란 실선으로 표시된 예측값은 마지막 level 추정값으로써, 모든 <code>h</code>에 대하여 동일하다는 것을 알 수 있다. 예측값을 표시한 실선을 포함하고 있는 짙은 파란 색 영역은 80% 예측 구간을 표시한 것이고, 옅은 파란 색 영역은 95% 예측 구간을 표시한 것이다. 예측 시차가 증가함에 따라 예측 구간의 폭은 계속 넓어지고 있음을 알 수 있다.</p>
<ul>
<li>Trend method 예제: <code>fpp2::ausair</code></li>
</ul>
<p><code>fpp2::ausair</code>는 1970년부터 2016년까지 호주의 연간 항공기 승객 수 자료이다. Holt’s linear trend와 damped Holt’s trend 모형을 이용해서 예측을 실시해 보자.</p>
<p>먼저 시계열 그래프를 그림 <a href="chapter-ets.html#fig:aus-air">3.3</a>에 작성해 보자.
상승 추세가 있는 것을 확인할 수 있다.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="chapter-ets.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(ausair) <span class="sc">+</span></span>
<span id="cb38-2"><a href="chapter-ets.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Air Transport Passengers Australia&quot;</span>, </span>
<span id="cb38-3"><a href="chapter-ets.html#cb38-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:aus-air"></span>
<img src="_main_files/figure-html/aus-air-1.png" alt="1970년부터 2016년까지 호주의 연간 항공기 승객 수" width="576" />
<p class="caption">
그림 3.3: 1970년부터 2016년까지 호주의 연간 항공기 승객 수
</p>
</div>
<p>Holt’s linear trend 모형을 함수 <code>holt()</code>를 사용해서 적합시키고, 15 시차에 대한 예측 결과를 그림 <a href="chapter-ets.html#fig:aus-air-fore1">3.4</a>에 나타내 보자.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="chapter-ets.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">holt</span>(ausair, <span class="at">h =</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="chapter-ets.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:aus-air-fore1"></span>
<img src="_main_files/figure-html/aus-air-fore1-1.png" alt="`ausair` 자료에 대한 Holt's linear trend method의 예측 결과" width="576" />
<p class="caption">
그림 3.4: <code>ausair</code> 자료에 대한 Holt’s linear trend method의 예측 결과
</p>
</div>
<p>Damped Holt’s trend 모형에 의한 예측 결과도 그래프로 나타내 보자. 결과는 그림 <a href="chapter-ets.html#fig:aus-air-fore2">3.5</a>에서 볼 수 있다.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="chapter-ets.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">holt</span>(ausair, <span class="at">h =</span> <span class="dv">15</span>, <span class="at">damped =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="chapter-ets.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:aus-air-fore2"></span>
<img src="_main_files/figure-html/aus-air-fore2-1.png" alt="`ausair` 자료에 대한 damped Holt's trend method의 예측 결과" width="576" />
<p class="caption">
그림 3.5: <code>ausair</code> 자료에 대한 damped Holt’s trend method의 예측 결과
</p>
</div>
<p>그림 <a href="chapter-ets.html#fig:aus-air-fore1">3.4</a>에서 볼 수 있듯이 Holt’s linear trend method에 의한 예측 결과는 지속적으로 증가하고 있으며, 반면에 damped Holt’s trend method에 의한 예측 결과는 상승 기울기가 점점 줄어들고 있다는 것을 그림 <a href="chapter-ets.html#fig:aus-air-fore2">3.5</a>에서 볼 수 있다.</p>
<ul>
<li>Holt-Winters’ seasonal method 예제: <code>fpp2::austourists</code></li>
</ul>
<p><code>austourists</code>는 199년부터 2015년까지 분기별 호주에 입국한 외국인 관광객 수 자료이다. 시계열 그래프는 그림 <a href="chapter-ets.html#fig:austour-1">3.6</a>에서 볼 수 있다.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="chapter-ets.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(austourists) <span class="sc">+</span></span>
<span id="cb41-2"><a href="chapter-ets.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">title =</span> <span class="st">&quot;International Tourists to Australia&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:austour-1"></span>
<img src="_main_files/figure-html/austour-1-1.png" alt="199년부터 2015년까지 분기별 호주에 입국한 외국인 관광객 수" width="576" />
<p class="caption">
그림 3.6: 199년부터 2015년까지 분기별 호주에 입국한 외국인 관광객 수
</p>
</div>
<p>Holt-Winters’ seasonal 모형을 이용해서 예측을 실시해 보자. 먼저 가법 모형으로 예측을 실시하고 결과를 그림 <a href="chapter-ets.html#fig:austour-2">3.7</a>에 그래프로 나타내 보자.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="chapter-ets.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hw</span>(austourists) <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="chapter-ets.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:austour-2"></span>
<img src="_main_files/figure-html/austour-2-1.png" alt="`austourists` 자료에 대한 Holt-Winters' additive seasonal method의 예측 결과" width="576" />
<p class="caption">
그림 3.7: <code>austourists</code> 자료에 대한 Holt-Winters’ additive seasonal method의 예측 결과
</p>
</div>
<p>이번에는 승법 모형으로 예측을 실시하고 결과를 그림 <a href="chapter-ets.html#fig:austour-3">3.8</a>에 그래프로 나타내 보자.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="chapter-ets.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hw</span>(austourists, <span class="at">seasonal =</span> <span class="st">&quot;multiplicative&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="chapter-ets.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:austour-3"></span>
<img src="_main_files/figure-html/austour-3-1.png" alt="`austourists` 자료에 대한 Holt-Winters' multiplicative seasonal method의 예측 결과" width="576" />
<p class="caption">
그림 3.8: <code>austourists</code> 자료에 대한 Holt-Winters’ multiplicative seasonal method의 예측 결과
</p>
</div>
</div>
<div id="ets-모형" class="section level2 unnumbered hasAnchor">
<h2>ETS 모형<a href="chapter-ets.html#ets-모형" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>예제 1: 1970년부터 2016년까지 연간 항공기 이용객 수 (<code>fpp2::ausair</code>)</li>
</ul>
<p><code>fpp2::ausair</code>는 1970년부터 2016년까지 호주의 연간 항공기 승객 수 자료이다. 먼저 전체 자료 중 1970년부터 2011년까지의 자료를 training data로 하고, 2012년 이후 자료를 test data로 분리하자.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="chapter-ets.html#cb44-1" aria-hidden="true" tabindex="-1"></a>train_air <span class="ot">&lt;-</span> <span class="fu">window</span>(ausair, <span class="at">end =</span> <span class="dv">2011</span>)</span>
<span id="cb44-2"><a href="chapter-ets.html#cb44-2" aria-hidden="true" tabindex="-1"></a>test_air <span class="ot">&lt;-</span> <span class="fu">window</span>(ausair, <span class="at">start =</span> <span class="dv">2012</span>)</span></code></pre></div>
<p><code>train_air</code>와 <code>test_air</code>의 시계열 그래프는 그림 <a href="chapter-ets.html#fig:ausair-plot">3.9</a>과 같다. <code>test_air</code>는 빨간 선으로 나타냈다.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="chapter-ets.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">window</span>(ausair, <span class="at">end =</span> <span class="dv">2012</span>)) <span class="sc">+</span></span>
<span id="cb45-2"><a href="chapter-ets.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">window</span>(ausair, <span class="at">start =</span> <span class="dv">2012</span>), <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb45-3"><a href="chapter-ets.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb45-4"><a href="chapter-ets.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ausair-plot"></span>
<img src="_main_files/figure-html/ausair-plot-1.png" alt="`ausair` 자료의 시계열그래프" width="576" />
<p class="caption">
그림 3.9: <code>ausair</code> 자료의 시계열그래프
</p>
</div>
<p>함수 <code>ets()</code>로 ETS 모형을 적합하고, 그 결과를 확인해 보자.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="chapter-ets.html#cb46-1" aria-hidden="true" tabindex="-1"></a>fit_air <span class="ot">&lt;-</span> <span class="fu">ets</span>(train_air)</span>
<span id="cb46-2"><a href="chapter-ets.html#cb46-2" aria-hidden="true" tabindex="-1"></a>fit_air</span></code></pre></div>
<pre><code>## ETS(M,A,N) 
## 
## Call:
##  ets(y = train_air) 
## 
##   Smoothing parameters:
##     alpha = 0.9999 
##     beta  = 0.024 
## 
##   Initial states:
##     l = 6.5399 
##     b = 0.7358 
## 
##   sigma:  0.08
## 
##      AIC     AICc      BIC 
## 206.1828 207.8495 214.8712</code></pre>
<p>최적 모형은 ETS(M,A,N)으로 선정되었다. 즉, 추세는 additive이고 오차는 multiplicative이며, 계절요소가 없는 모형이 적합되었다. 평활모수는 <span class="math inline">\(\alpha=\)</span> 0.9999 , <span class="math inline">\(\beta=\)</span> 0.024 로 추정되었다. 따라서 시계열자료의 level에는 큰 변화가 있으나, 추세의 기울기에는 큰 변화 없이 일정하다는 것을 알 수 있다.</p>
<p>ETS 모형의 각 요소에 대한 추정 결과를 그림 <a href="chapter-ets.html#fig:fit-air-comp">3.10</a>의 그래프로 나타내 보자.
관측된 자료의 시계열 그래프, 그리고 level의 추정 결과와 추세 기울기의 추정 결과의 시계열 그래프가 함께 작성되어 있다. 그래프 오른쪽 끝에 있는 동일한 높이의 막대가 표시되어 있어서 각 요소의 스케일을 비교할 수 있다.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="chapter-ets.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(fit_air)  </span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:fit-air-comp"></span>
<img src="_main_files/figure-html/fit-air-comp-1.png" alt="ETS 모형의 각 요소에 대한 추정 결과 그래프" width="576" />
<p class="caption">
그림 3.10: ETS 모형의 각 요소에 대한 추정 결과 그래프
</p>
</div>
<p>모형의 가정 만족 여부를 함수 <code>checkresiduals()</code>로 확인해 보자.
특별히 문제가 되는 가정 사항은 없는 것으로 보인다.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="chapter-ets.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(fit_air)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="576" /></p>
<pre><code>## 
##  Ljung-Box test
## 
## data:  Residuals from ETS(M,A,N)
## Q* = 3.5236, df = 4, p-value = 0.4743
## 
## Model df: 4.   Total lags used: 8</code></pre>
<p>이제 예측을 실시하고 예측 오차에 대한 평가를 실시해 보자.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="chapter-ets.html#cb51-1" aria-hidden="true" tabindex="-1"></a>fc_air <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_air, <span class="at">h =</span> <span class="fu">length</span>(test_air))</span>
<span id="cb51-2"><a href="chapter-ets.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(fc_air, test_air)</span></code></pre></div>
<pre><code>##                     ME     RMSE     MAE       MPE     MAPE
## Training set 0.5550369 2.138179 1.31460 0.7893247 5.399428
## Test set     1.7629504 1.888573 1.76295 2.5419343 2.541934
##                   MASE        ACF1 Theil&#39;s U
## Training set 0.7649321 -0.09163575        NA
## Test set     1.0258159 -0.22513230  1.034042</code></pre>
<p>예측 결과를 그래프로 나타내 보자. 함수 <code>autoplot()</code>에 함수 <code>forecast()</code>의 결과인 객체 <code>fc_air</code>를 입력하면 training data와 예측 결과를 함께 나타낸다. 옵션 <code>include</code>는 그래프에 포함시킬 training data의 개수를 지정하는 것이다. 따라서 <code>include = 0</code>을 입력하면 예측 부분만을 확대한 효과를 볼 수 있다.
작성 결과는 그림 <a href="chapter-ets.html#fig:aus-ETS-fore">3.11</a>에서 볼 수 있다.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="chapter-ets.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb53-2"><a href="chapter-ets.html#cb53-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(fc_air) <span class="sc">+</span> </span>
<span id="cb53-3"><a href="chapter-ets.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_air, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb53-4"><a href="chapter-ets.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) </span>
<span id="cb53-5"><a href="chapter-ets.html#cb53-5" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(fc_air, <span class="at">include =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb53-6"><a href="chapter-ets.html#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_air, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size=</span>.<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb53-7"><a href="chapter-ets.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) </span>
<span id="cb53-8"><a href="chapter-ets.html#cb53-8" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:aus-ETS-fore"></span>
<img src="_main_files/figure-html/aus-ETS-fore-1.png" alt="`fpp2::ausair` 자료에 대한 ETS 모형의 예측 결과" width="768" />
<p class="caption">
그림 3.11: <code>fpp2::ausair</code> 자료에 대한 ETS 모형의 예측 결과
</p>
</div>
<ul>
<li>예제 2: 1999년부터 2015년까지 분기별 호주 입국 외국인 관광객 수 (<code>fpp2::austourists</code>)</li>
</ul>
<p><code>austourists</code>는 1999년부터 2015년까지 분기별로 호주에 입국한 외국인 관광객 수 자료이다. 2013년 4분기까지를 training data로 분리하고 2014년 1분기부터를 test data로 분리하자.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="chapter-ets.html#cb54-1" aria-hidden="true" tabindex="-1"></a>train_tour <span class="ot">&lt;-</span> <span class="fu">window</span>(austourists, <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2013</span>, <span class="dv">4</span>))</span>
<span id="cb54-2"><a href="chapter-ets.html#cb54-2" aria-hidden="true" tabindex="-1"></a>test_tour <span class="ot">&lt;-</span> <span class="fu">window</span>(austourists, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">1</span>))</span></code></pre></div>
<p>두 자료의 시계열 그래프는 그림 <a href="chapter-ets.html#fig:austour-plot">3.12</a>과 같다.
Test data는 빨간 선으로 표시했다. 상승 추세가 있으며, 명확한 계절요소가 있는 것을 알 수 있다.
또한 계절요소의 진폭이 추세가 상승함에 따라 다소 증가하고 있는 것을 볼 수 있다.</p>
<div class="figure"><span style="display:block;" id="fig:austour-plot"></span>
<img src="_main_files/figure-html/austour-plot-1.png" alt="`austourists` 자료의 시계열 그래프" width="576" />
<p class="caption">
그림 3.12: <code>austourists</code> 자료의 시계열 그래프
</p>
</div>
<p>함수 <code>ets()</code>로 최적 모형을 적합해 보자.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="chapter-ets.html#cb55-1" aria-hidden="true" tabindex="-1"></a>fit_tour <span class="ot">&lt;-</span> <span class="fu">ets</span>(train_tour)</span>
<span id="cb55-2"><a href="chapter-ets.html#cb55-2" aria-hidden="true" tabindex="-1"></a>fit_tour</span></code></pre></div>
<pre><code>## ETS(M,A,M) 
## 
## Call:
##  ets(y = train_tour) 
## 
##   Smoothing parameters:
##     alpha = 0.4189 
##     beta  = 1e-04 
##     gamma = 1e-04 
## 
##   Initial states:
##     l = 24.2672 
##     b = 0.5179 
##     s = 1.0367 0.9578 0.7697 1.2358
## 
##   sigma:  0.0612
## 
##      AIC     AICc      BIC 
## 353.3882 356.9882 372.2373</code></pre>
<p>ETS(M,A,M) 모형이 선택되었다. 승법 계절 성분이 선택되었다는 것은 계절 요소의 변동 폭이 증가한다는 의미가 된다. 이런 경우에 시계열자료를 로그변환 시킨 후 다시 ETS 모형을 적합시키면 가법 계절 모형이 선택될 것이다. 함수 <code>ets()</code>의 Box_Cox 변환 모수인 옵션 <code>lambda</code>에 0을 입력하면 로그변환된 자료를 대상으로 모형 적합이 이루어진다.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="chapter-ets.html#cb57-1" aria-hidden="true" tabindex="-1"></a>fit_lntour <span class="ot">&lt;-</span> <span class="fu">ets</span>(train_tour, <span class="at">lambda =</span> <span class="dv">0</span>)</span>
<span id="cb57-2"><a href="chapter-ets.html#cb57-2" aria-hidden="true" tabindex="-1"></a>fit_lntour</span></code></pre></div>
<pre><code>## ETS(A,A,A) 
## 
## Call:
##  ets(y = train_tour, lambda = 0) 
## 
##   Box-Cox transformation: lambda= 0 
## 
##   Smoothing parameters:
##     alpha = 0.337 
##     beta  = 1e-04 
##     gamma = 0.0137 
## 
##   Initial states:
##     l = 3.2161 
##     b = 0.0122 
##     s = 0.055 -0.0254 -0.2477 0.2181
## 
##   sigma:  0.0639
## 
##       AIC      AICc       BIC 
## -75.06808 -71.46808 -56.21898</code></pre>
<p>모형 <code>fit_tour</code>의 가정 만족 여부를 확인해 보자.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="chapter-ets.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(fit_tour)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-22-1.png" width="576" /></p>
<pre><code>## 
##  Ljung-Box test
## 
## data:  Residuals from ETS(M,A,M)
## Q* = 5.3591, df = 3, p-value = 0.1473
## 
## Model df: 8.   Total lags used: 11</code></pre>
<p>모형 <code>fit_lntour</code>의 가정 만족 여부도 확인해 보자.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="chapter-ets.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(fit_lntour)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-23-1.png" width="576" /></p>
<pre><code>## 
##  Ljung-Box test
## 
## data:  Residuals from ETS(A,A,A)
## Q* = 7.2993, df = 3, p-value = 0.06294
## 
## Model df: 8.   Total lags used: 11</code></pre>
<p>두 모형 모두 가정은 만족시키는 것으로 보인다. 이제 두 모형의 예측을 실시하고, 그 결과를 비교해 보자.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="chapter-ets.html#cb63-1" aria-hidden="true" tabindex="-1"></a>fc_tour <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_tour, <span class="at">h =</span> <span class="fu">length</span>(test_tour)) </span>
<span id="cb63-2"><a href="chapter-ets.html#cb63-2" aria-hidden="true" tabindex="-1"></a>fc_lntour <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_lntour, <span class="at">h =</span> <span class="fu">length</span>(test_tour))</span></code></pre></div>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="chapter-ets.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(fc_tour, test_tour)</span></code></pre></div>
<pre><code>##                       ME     RMSE      MAE        MPE
## Training set 0.004642325 1.966538 1.474615 -0.4054666
## Test set     1.541295202 2.989673 2.414226  2.6022154
##                  MAPE      MASE       ACF1 Theil&#39;s U
## Training set 4.196005 0.5206241 -0.0243205        NA
## Test set     3.958845 0.8523613  0.5001355 0.2077632</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="chapter-ets.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(fc_lntour, test_tour)</span></code></pre></div>
<pre><code>##                     ME     RMSE      MAE        MPE
## Training set 0.1640202 2.014686 1.562901 0.04389638
## Test set     0.6115065 2.128486 1.722829 1.03590923
##                  MAPE      MASE       ACF1 Theil&#39;s U
## Training set 4.399828 0.5517943 0.01619145        NA
## Test set     2.853023 0.6082580 0.47705974 0.1348746</code></pre>
<p>모형 ETS(A,A,A)인 <code>fit_lntour</code>의 test data에 대한 예측 오차가 조금 더 작은 것을 볼 수 있다.
두 모형의 예측 결과를 그림 <a href="chapter-ets.html#fig:tour-ets-fore1">3.13</a>의 그래프로 비교해 보자.
함수 <code>autolayer()</code>에 <code>PI = FALSE</code>를 입력하면 예측 구간이 생략된다. 이것은 두 모형의 예측 구간이 함께 표시되면 서로 겹쳐지는 현상이 발생하기 때문에 생략한 것이다.
두 모형의 예측에는 큰 차이가 없음을 알 수 있다.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="chapter-ets.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb68-2"><a href="chapter-ets.html#cb68-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(train_tour) <span class="sc">+</span></span>
<span id="cb68-3"><a href="chapter-ets.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_tour, <span class="at">series =</span> <span class="st">&quot;Test data&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-4"><a href="chapter-ets.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(fc_tour, <span class="at">PI =</span> <span class="cn">FALSE</span>, <span class="at">series =</span> <span class="st">&quot;ETS(M,A,M)&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-5"><a href="chapter-ets.html#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(fc_lntour, <span class="at">PI =</span> <span class="cn">FALSE</span>, <span class="at">series =</span> <span class="st">&quot;ETS(A,A,A)&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-6"><a href="chapter-ets.html#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">color =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb68-7"><a href="chapter-ets.html#cb68-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb68-8"><a href="chapter-ets.html#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="chapter-ets.html#cb68-9" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(test_tour, <span class="at">series =</span> <span class="st">&quot;Test data&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb68-10"><a href="chapter-ets.html#cb68-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(fc_tour, <span class="at">PI =</span> <span class="cn">FALSE</span>, <span class="at">series =</span> <span class="st">&quot;ETS(M,A,M)&quot;</span>, </span>
<span id="cb68-11"><a href="chapter-ets.html#cb68-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb68-12"><a href="chapter-ets.html#cb68-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(fc_lntour, <span class="at">PI =</span> <span class="cn">FALSE</span>, <span class="at">series =</span> <span class="st">&quot;ETS(A,A,A)&quot;</span>, </span>
<span id="cb68-13"><a href="chapter-ets.html#cb68-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb68-14"><a href="chapter-ets.html#cb68-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">color =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb68-15"><a href="chapter-ets.html#cb68-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb68-16"><a href="chapter-ets.html#cb68-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-17"><a href="chapter-ets.html#cb68-17" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:tour-ets-fore1"></span>
<img src="_main_files/figure-html/tour-ets-fore1-1.png" alt="`austourists` 자료에 대한 예측 결과 비교" width="768" />
<p class="caption">
그림 3.13: <code>austourists</code> 자료에 대한 예측 결과 비교
</p>
</div>
<p>모형 ETS(A,A,A)인 <code>fit_lntour</code>의 test data에 대한 예측 결과를 예측 구간과 함께 그림 <a href="chapter-ets.html#fig:tour-ets-fore3">3.14</a>의 그래프로 나타내 보자.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="chapter-ets.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb69-2"><a href="chapter-ets.html#cb69-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(fc_lntour) <span class="sc">+</span></span>
<span id="cb69-3"><a href="chapter-ets.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_tour, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb69-4"><a href="chapter-ets.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) </span>
<span id="cb69-5"><a href="chapter-ets.html#cb69-5" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(fc_lntour, <span class="at">include =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb69-6"><a href="chapter-ets.html#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_tour, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb69-7"><a href="chapter-ets.html#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb69-8"><a href="chapter-ets.html#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fl">2014.0</span>, <span class="fl">2014.5</span>, <span class="fl">2015.0</span>, <span class="fl">2015.5</span>),</span>
<span id="cb69-9"><a href="chapter-ets.html#cb69-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;2014.Q1&quot;</span>, <span class="st">&quot;2014.Q4&quot;</span>, <span class="st">&quot;2015.Q1&quot;</span>,</span>
<span id="cb69-10"><a href="chapter-ets.html#cb69-10" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;2015.Q4&quot;</span>))</span>
<span id="cb69-11"><a href="chapter-ets.html#cb69-11" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:tour-ets-fore3"></span>
<img src="_main_files/figure-html/tour-ets-fore3-1.png" alt="`austourists` 자료에 대한 예측 결과" width="768" />
<p class="caption">
그림 3.14: <code>austourists</code> 자료에 대한 예측 결과
</p>
</div>
<ul>
<li>예제 3: 1965년 1월부터 1992년 7월까지 월별 실업 급여 수급 인원 수 (<code>fma::dole</code>)</li>
</ul>
<p><code>fma::dole</code>은 1965년 1월부터 1992년 7월까지 월별로 실업 급여를 받아간 인원 수 자료이다. 마지막 2년 자료를 test data로 분리해 보자.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="chapter-ets.html#cb70-1" aria-hidden="true" tabindex="-1"></a>train_d <span class="ot">&lt;-</span> <span class="fu">window</span>(dole, <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">1990</span>, <span class="dv">7</span>))</span>
<span id="cb70-2"><a href="chapter-ets.html#cb70-2" aria-hidden="true" tabindex="-1"></a>test_d <span class="ot">&lt;-</span> <span class="fu">window</span>(dole, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1990</span>, <span class="dv">8</span>))</span></code></pre></div>
<p>두 자료에 대한 시계열 그래프는 그림 <a href="chapter-ets.html#fig:dole-plot">3.15</a>과 같다.
Test data는 빨간 선으로 표시했다.
1990년부터 갑작스런 증가세를 보이고 있으며, test data가 대부분 그 시기에 관측된 것이다. 따라서 예측이 상당히 어려운 것으로 보이는 상황이다.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="chapter-ets.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(train_d) <span class="sc">+</span> </span>
<span id="cb71-2"><a href="chapter-ets.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_d, <span class="at">show.legend=</span><span class="cn">FALSE</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb71-3"><a href="chapter-ets.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:dole-plot"></span>
<img src="_main_files/figure-html/dole-plot-1.png" alt="`dole` 자료의 시계열그래프" width="576" />
<p class="caption">
그림 3.15: <code>dole</code> 자료의 시계열그래프
</p>
</div>
<p>ETS 모형을 적합해 보자.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="chapter-ets.html#cb72-1" aria-hidden="true" tabindex="-1"></a>fit_d <span class="ot">&lt;-</span> <span class="fu">ets</span>(train_d)</span>
<span id="cb72-2"><a href="chapter-ets.html#cb72-2" aria-hidden="true" tabindex="-1"></a>fit_d</span></code></pre></div>
<pre><code>## ETS(M,Ad,M) 
## 
## Call:
##  ets(y = train_d) 
## 
##   Smoothing parameters:
##     alpha = 0.7057 
##     beta  = 0.1262 
##     gamma = 0.2942 
##     phi   = 0.8701 
## 
##   Initial states:
##     l = 2693.6084 
##     b = 838.4198 
##     s = 1.0776 0.9108 0.9286 0.9993 1.0254 1.0275
##            1.0028 0.9466 1.0225 0.9982 1.0038 1.0568
## 
##   sigma:  0.0965
## 
##       AIC      AICc       BIC 
##  9930.864  9932.591 10003.373</code></pre>
<p>가정 만족 여부를 확인해 보니, 독립성 가정에 문제가 있는 것을 볼 수 있다. 이런 경우, 점 예측값 (point forecast)에는 별다른 문제가 없겠지만, 예측 구간을 신뢰하기 어렵다고 할 수 있다.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="chapter-ets.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(fit_d)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="576" /></p>
<pre><code>## 
##  Ljung-Box test
## 
## data:  Residuals from ETS(M,Ad,M)
## Q* = 270.13, df = 7, p-value &lt; 2.2e-16
## 
## Model df: 17.   Total lags used: 24</code></pre>
<p>예측을 실시하고 평가해 보자.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="chapter-ets.html#cb76-1" aria-hidden="true" tabindex="-1"></a>fc_d <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_d, <span class="at">h =</span> <span class="fu">length</span>(test_d))</span>
<span id="cb76-2"><a href="chapter-ets.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(fc_d, test_d)</span></code></pre></div>
<pre><code>##                      ME      RMSE        MAE        MPE
## Training set    307.438  16094.96   9474.828  0.5940649
## Test set     208048.806 234353.38 208048.806 28.7917875
##                   MAPE      MASE      ACF1 Theil&#39;s U
## Training set  6.112239 0.2965093 0.5103798        NA
## Test set     28.791788 6.5107678 0.8895083  8.715368</code></pre>
<p>MASE 값이 지나치게 큰 값이라는 것을 알 수 있다. 예측 결과를 그림 <a href="chapter-ets.html#fig:dole-fore1">3.16</a>의 그래프로 나타내 보자.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="chapter-ets.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(fc_d) <span class="sc">+</span></span>
<span id="cb78-2"><a href="chapter-ets.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_d, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb78-3"><a href="chapter-ets.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) </span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:dole-fore1"></span>
<img src="_main_files/figure-html/dole-fore1-1.png" alt="`dole` 자료에 대한 예측 결과" width="576" />
<p class="caption">
그림 3.16: <code>dole</code> 자료에 대한 예측 결과
</p>
</div>
<p>예측이 완벽하게 벗어난 것을 볼 수 있다. 이와 같이 실업자 수가 갑작스럽게 증가하는 상황에서는 과거 자료만을 이용하는 시계열 모형으로는 효율적인 예측이 불가능하다고 하겠다.</p>
<p>Test data에서 발생한 갑작스런 변화의 충격을 완화시키는 방법으로 test data의 기간 축소를 생각할 수 있다.
이렇게 되면, 증가 추세가 training data에도 어느 정도 반영될 수 있을 것이다.
하지만 이 방법은 자료의 추세를 먼저 확인하고 test data의 기간을 변경하는 것이어서 정당한 자료 분리 방법은 아니라고 할 수 있다.
마지막 1년만을 test data로 남겨 놓고 모형 적합을 시도해 보자. 자료분리는 함수 <code>subset()으로도 진행할 수 있다. 옵션</code>end<code>와</code>start`에 벡터에서 적용되는 방식의 인덱스를 지정할 수 있다.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="chapter-ets.html#cb79-1" aria-hidden="true" tabindex="-1"></a>train_d_1 <span class="ot">&lt;-</span> <span class="fu">subset</span>(dole, <span class="at">end =</span> <span class="fu">length</span>(dole) <span class="sc">-</span> <span class="dv">12</span>)</span>
<span id="cb79-2"><a href="chapter-ets.html#cb79-2" aria-hidden="true" tabindex="-1"></a>test_d_1 <span class="ot">&lt;-</span> <span class="fu">subset</span>(dole, <span class="at">start =</span> <span class="fu">length</span>(dole) <span class="sc">-</span> <span class="dv">11</span>)</span></code></pre></div>
<p>변경된 training data를 사용해서 적합된 모형으로 마지막 1년 자료에 대한 예측을 실시해 보자.
훨씬 개선된 결과를 볼 수 있다.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="chapter-ets.html#cb80-1" aria-hidden="true" tabindex="-1"></a>fc_d_1 <span class="ot">&lt;-</span> train_d_1 <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="chapter-ets.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ets</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb80-3"><a href="chapter-ets.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="fu">length</span>(test_d_1))</span></code></pre></div>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="chapter-ets.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(fc_d_1, test_d_1)</span></code></pre></div>
<pre><code>##                     ME     RMSE      MAE       MPE     MAPE
## Training set  419.4624 18184.20 10856.63 0.5111136 6.268750
## Test set     5143.1303 46330.29 40948.53 1.0361996 5.319935
##                   MASE      ACF1 Theil&#39;s U
## Training set 0.3014767 0.5191139        NA
## Test set     1.1370959 0.8678915  2.792915</code></pre>
<p>이제 예측 결과를 그림 <a href="chapter-ets.html#fig:dole-fore-2">3.17</a>의 그래프로 나타내 보자.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="chapter-ets.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb83-2"><a href="chapter-ets.html#cb83-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(fc_d_1) <span class="sc">+</span> </span>
<span id="cb83-3"><a href="chapter-ets.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_d_1, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb83-4"><a href="chapter-ets.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) </span>
<span id="cb83-5"><a href="chapter-ets.html#cb83-5" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(fc_d_1, <span class="at">include =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb83-6"><a href="chapter-ets.html#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_d_1, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb83-7"><a href="chapter-ets.html#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>) </span>
<span id="cb83-8"><a href="chapter-ets.html#cb83-8" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:dole-fore-2"></span>
<img src="_main_files/figure-html/dole-fore-2-1.png" alt="`dole` 자료에 대한 예측 결과" width="768" />
<p class="caption">
그림 3.17: <code>dole</code> 자료에 대한 예측 결과
</p>
</div>
<ul>
<li>예제 4: 2014년 4월 30일부터 1년간 Hyndsight 블로그 일일 방문자 수 (<code>fpp2::hyndsight</code>)</li>
</ul>
<p><code>hyndsight</code>는 2014년 4월 30일부터 1년간 Hyndman이 운영하는 블로그에 방문한 일일 방문자 수 자료이다.
자료의 시계열그래프는 그림 <a href="chapter-ets.html#fig:hynd-plot">3.18</a>에서 볼 수 있다.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="chapter-ets.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(hyndsight) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:hynd-plot"></span>
<img src="_main_files/figure-html/hynd-plot-1.png" alt="`hyndsight` 자료의 시계열그래프" width="576" />
<p class="caption">
그림 3.18: <code>hyndsight</code> 자료의 시계열그래프
</p>
</div>
<p>일일 자료의 경우에 요일의 영향을 받는 자료라면 <span class="math inline">\(m=7\)</span>의 계절 주기를 갖게 된다. 자료 분리를 위해 2014년 4월 30일이 무슨 요일인지 확인해 보자.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="chapter-ets.html#cb85-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2014-4-30&quot;</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 수
## Levels: 일 &lt; 월 &lt; 화 &lt; 수 &lt; 목 &lt; 금 &lt; 토</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="chapter-ets.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">start</span>(hyndsight); <span class="fu">end</span>(hyndsight)</span></code></pre></div>
<pre><code>## [1] 1 4</code></pre>
<pre><code>## [1] 53  4</code></pre>
<p>2014년 4월 30일은 수요일이며, 자료의 시작 시점은 1주 4일 (수)이고 종료 시점은 53주 4일 (수)이 된다. Training data는 1주 4일부터 48주 4일까지로 하고, test data는 48주 5일부터 53주 4일까지 5주간으로 설정하자.</p>
<p>자료 분리는 함수 <code>window()</code>로 보통 진행하지만, 이렇게 자료의 개수로 분리하는 것이 더 편리한 경우에는 함수 <code>subset()</code>으로 진행 할 수 있다. 즉, 마지막 35일 자료를 test data로 분리해 보자.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="chapter-ets.html#cb90-1" aria-hidden="true" tabindex="-1"></a>train_hyn <span class="ot">&lt;-</span> <span class="fu">subset</span>(hyndsight, <span class="at">end =</span> <span class="fu">length</span>(hyndsight)<span class="sc">-</span><span class="dv">35</span>)</span>
<span id="cb90-2"><a href="chapter-ets.html#cb90-2" aria-hidden="true" tabindex="-1"></a>test_hyn <span class="ot">&lt;-</span> <span class="fu">subset</span>(hyndsight, <span class="at">start =</span> <span class="fu">length</span>(hyndsight)<span class="sc">-</span><span class="dv">34</span>)</span></code></pre></div>
<p>ETS 모형을 적합해 보자. 추세는 없고, 오차와 계절 성분이 모두 가법 형태인 모형이 선택되었다.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="chapter-ets.html#cb91-1" aria-hidden="true" tabindex="-1"></a>fit_hyn <span class="ot">&lt;-</span> <span class="fu">ets</span>(train_hyn)</span>
<span id="cb91-2"><a href="chapter-ets.html#cb91-2" aria-hidden="true" tabindex="-1"></a>fit_hyn</span></code></pre></div>
<pre><code>## ETS(A,N,A) 
## 
## Call:
##  ets(y = train_hyn) 
## 
##   Smoothing parameters:
##     alpha = 0.4426 
##     gamma = 1e-04 
## 
##   Initial states:
##     l = 1173.6676 
##     s = 296.9907 -34.3415 -457.6839 -271.7606 63.9589 172.9509
##            229.8854
## 
##   sigma:  232.0085
## 
##      AIC     AICc      BIC 
## 5519.446 5520.136 5557.437</code></pre>
<p>이제 예측을 진행해 보자.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="chapter-ets.html#cb93-1" aria-hidden="true" tabindex="-1"></a>fc_hyn <span class="ot">&lt;-</span> <span class="fu">forecast</span>(fit_hyn, <span class="at">h =</span> <span class="fu">length</span>(test_hyn))</span>
<span id="cb93-2"><a href="chapter-ets.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">accuracy</span>(fc_hyn, test_hyn)</span></code></pre></div>
<pre><code>##                      ME     RMSE      MAE       MPE
## Training set   3.727848 228.8229 164.1102 -2.026679
## Test set     -73.167844 231.3494 180.9392 -8.044075
##                  MAPE      MASE      ACF1 Theil&#39;s U
## Training set 13.86475 0.7404020 0.1874059        NA
## Test set     13.09378 0.8163279 0.3712518 0.5878683</code></pre>
<p>예측 결과를 그림 <a href="chapter-ets.html#fig:hyn-fore">3.19</a>의 그래프와 같이 작성해 보자.
빨간 실선은 test data이고, 파란 실선이 예측 결과이다.
예측 구간은 80%와 95% 수준에서 각각 계산되는 것이 디폴트이며,
80% 예측 구간은 짙은 색으로 표시되고, 95% 예측 구간은 옅은 색으로 표시된다.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="chapter-ets.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(fc_hyn, <span class="at">include =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb95-2"><a href="chapter-ets.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autolayer</span>(test_hyn, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb95-3"><a href="chapter-ets.html#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) </span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:hyn-fore"></span>
<img src="_main_files/figure-html/hyn-fore-1.png" alt="`hynsight` 자료에 대한 예측 결과" width="576" />
<p class="caption">
그림 3.19: <code>hynsight</code> 자료에 대한 예측 결과
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-decomposition.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-arima.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
